\pgfplotsset{
	axis background/.style={fill=white},
	tick style=black,
	tick label style=black,
	grid=both,
	xtick pos=left,
	ytick pos=left,
	tick style={
		major grid style={style=white,line width=1pt},minor grid style=white,
		tick align=outside,
	},
	minor tick num=4,
	compat = 1.3,
}

\begin{figure}[tb]
	\centering
	\pgfplotstableread{
		0		677		1448	386.9		828
		1		381		1469	351.5		1355
		2		312		1250	349.5		1400
		3		155		582		372			1396
		4		127		494		353.4		1375
		5		83		321		354			1369
		6		76		300		347.3		1370
		7		82		310		351.3		1328
	}\datathroughput	
	\subfigure[Data processing throughput in MB/s]{
		\begin{tikzpicture}[scale = 0.9]
		\centering
		\begin{axis}[
%		axis y line=left,
		ybar=0pt,
		width=17cm,
		x = 0.85cm,
		height=5.3cm,
		ymin=0,
		ymax=2500,        
		ylabel={MB/s},
		grid style={dotted,gray},
		ymajorgrids=true,
		%	nodes near coords,    
		xtick=data,
		bar width = 5, %0.15
		xticklabels = {
			\strut 1,
			\strut 2,
			\strut 3,
			\strut 4,
			\strut 5,
			\strut 6,
			\strut 7,
			\strut 8                                   
		},
		x tick label style={rotate=45, anchor=north east, inner sep=0mm},
		major x tick style = {opacity=0},
		minor x tick num = 1,
		minor tick length=1ex,
		%	every node near coord/.append style={
		%		anchor=west,
		%		rotate=90,
		%		font=\tiny
		%	},
		]
		
		\addplot[draw=black,fill=blue, draw opacity=1] table[x index=0,y index=3] \datathroughput;\label{MB_xillybus_pcie}
		\addplot[draw=black,fill=red, draw opacity=1] table[x index=0,y index=4]   \datathroughput;\label{MB_riffa} 					
		\end{axis}
		
		\node [draw=none, fill=white] at (rel axis cs: 0.45, 0.8) {\shortstack[l]{
				\ref{MB_xillybus_pcie} PCIe-Xillybus-Overlay \\ \ref{MB_riffa} RIFFA-Overlay }};	
		\end{tikzpicture}
	}

	\subfigure[Throughput in MOPS]{
		\begin{tikzpicture}[scale = 0.9]
		\centering
		\begin{axis}[
%		axis y line=right,
		ybar=0pt,
		width=17cm,
		x = 0.85cm,
		height=5.3cm,
		ymin=0,
		ymax=2500,        
		ylabel={MOPS},
		grid style={dotted,gray},
		ymajorgrids=true,
		%	nodes near coords,    
		xtick=data,
		bar width = 5, %0.15
		xticklabels = {
			\strut 1,
			\strut 2,
			\strut 3,
			\strut 4,
			\strut 5,
			\strut 6,
			\strut 7,
			\strut 8                                   
		},
		x tick label style={rotate=45, anchor=north east, inner sep=0mm},
		major x tick style = {opacity=0},
		minor x tick num = 1,
		minor tick length=1ex,
		%	every node near coord/.append style={
		%		anchor=west,
		%		rotate=90,
		%		font=\tiny
		%	},
		]
		
		\addplot[draw=black,fill=blue, draw opacity=1] table[x index=0,y index=1] \datathroughput;\label{MOPS_xillybus_pcie}
		\addplot[draw=black,fill=red, draw opacity=1] table[x index=0,y index=2]   \datathroughput;\label{MOPS_riffa} 					
		\end{axis}
		
		\node [draw=none, fill=white] at (rel axis cs: 0.45, 0.8) {\shortstack[l]{
				\ref{MOPS_xillybus_pcie} PCIe-Xillybus-Overlay \\ \ref{MOPS_riffa} RIFFA-Overlay }};	
		\end{tikzpicture}
	}
	
	\caption{Performance comparison for the benchmarks.}
	\label{pcie_xillybus_riffa_bw}
\end{figure}